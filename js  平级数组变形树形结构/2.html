<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        var arr1 = [{
                "hasChildren": "false",
                "name": "地图的基本特征与定义",
                "id": "0101001",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地图的内容和分类",
                "id": "0101002",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地图投影(上)",
                "id": "010100301",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地图投影(下)",
                "id": "010100302",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地物符号(上)",
                "id": "010100401",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地物符号(中)",
                "id": "010100402",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地物符号(下)",
                "id": "010100403",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地貌判断(上)",
                "id": "010100501",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地貌判断(下)",
                "id": "010100502",
                "label": "2",
                "parentId": "0101"
            },
            {
                "hasChildren": "false",
                "name": "地形图的分类与使用(上)",
                "id": "010200101",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "地形图的分类与使用(下)",
                "id": "010200102",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "地形图的坐标系统(上)",
                "id": "010200201",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "地形图的坐标系统(下)",
                "id": "010200202",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "地图比例尺",
                "id": "0102003",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "方位角与偏角",
                "id": "0102004",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "地形图与联合作战图的分幅与编号",
                "id": "0102005",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "现地判定方位(上)",
                "id": "010200601",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "现地判定方位(下)",
                "id": "010200602",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "现地对照地形(上)",
                "id": "010200701",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "现地对照地形(下)",
                "id": "010200702",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "按地图行进(上)",
                "id": "010200801",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "按地图行进(下)",
                "id": "010200802",
                "label": "2",
                "parentId": "0102"
            },
            {
                "hasChildren": "false",
                "name": "联合作战图一",
                "id": "0103001",
                "label": "2",
                "parentId": "0103"
            },
            {
                "hasChildren": "false",
                "name": "联合作战图二",
                "id": "0103002",
                "label": "2",
                "parentId": "0103"
            },
            {
                "hasChildren": "false",
                "name": "海图知识",
                "id": "0104001",
                "label": "2",
                "parentId": "0104"
            },
            {
                "hasChildren": "false",
                "name": "海图使用(上)",
                "id": "010400201",
                "label": "2",
                "parentId": "0104"
            },
            {
                "hasChildren": "false",
                "name": "海图使用(下)",
                "id": "010400202",
                "label": "2",
                "parentId": "0104"
            },
            {
                "hasChildren": "false",
                "name": "航空图基础",
                "id": "0105001",
                "label": "2",
                "parentId": "0105"
            },
            {
                "hasChildren": "false",
                "name": "航空图识图用图(上)",
                "id": "010500201",
                "label": "2",
                "parentId": "0105"
            },
            {
                "hasChildren": "false",
                "name": "航空图识图用图(下)",
                "id": "010500202",
                "label": "2",
                "parentId": "0105"
            },
            {
                "hasChildren": "false",
                "name": "目标符号与军事设施符号的识别(上)",
                "id": "010600101",
                "label": "2",
                "parentId": "0106"
            },
            {
                "hasChildren": "false",
                "name": "目标符号与军事设施符号的识别(下)",
                "id": "010600102",
                "label": "2",
                "parentId": "0106"
            },
            {
                "hasChildren": "false",
                "name": "目标图及其使用",
                "id": "0106002",
                "label": "2",
                "parentId": "0106"
            },
            {
                "hasChildren": "false",
                "name": "遥感图像及其特征(上)",
                "id": "010700101",
                "label": "2",
                "parentId": "0107"
            },
            {
                "hasChildren": "false",
                "name": "遥感图像及其特征(下)",
                "id": "010700102",
                "label": "2",
                "parentId": "0107"
            },
            {
                "hasChildren": "false",
                "name": "遥感图像判读与应用(上)",
                "id": "010700201",
                "label": "2",
                "parentId": "0107"
            },
            {
                "hasChildren": "false",
                "name": "遥感图像判读与应用(下)",
                "id": "010700202",
                "label": "2",
                "parentId": "0107"
            },
            {
                "hasChildren": "false",
                "name": "数字地图一",
                "id": "0108001",
                "label": "2",
                "parentId": "0108"
            },
            {
                "hasChildren": "false",
                "name": "数字地图二",
                "id": "0108002",
                "label": "2",
                "parentId": "0108"
            },
            {
                "hasChildren": "true",
                "name": "地图基础",
                "id": "0101",
                "label": "1",
                "parentId": "01"
            },
            {
                "hasChildren": "true",
                "name": "地形图",
                "id": "0102",
                "label": "1",
                "parentId": "01"
            },
            {
                "hasChildren": "true",
                "name": "联合作战图",
                "id": "0103",
                "label": "1",
                "parentId": "01"
            },
            {
                "hasChildren": "true",
                "name": "海图",
                "id": "0104",
                "label": "1",
                "parentId": "01"
            },
            {
                "hasChildren": "true",
                "name": "航空图",
                "id": "0105",
                "label": "1",
                "parentId": "01"
            },
            {
                "hasChildren": "true",
                "name": "目标图",
                "id": "0106",
                "label": "1",
                "parentId": "01"
            },
            {
                "hasChildren": "true",
                "name": "遥感图像",
                "id": "0107",
                "label": "1",
                "parentId": "01"
            },
            {
                "hasChildren": "true",
                "name": "军用数字地图",
                "id": "0108",
                "label": "1",
                "parentId": "01"
            }
        ]

        function sonTree(obj, arr) {
            var children = new Array();
            for (var i = 0; i < arr.length; i++) {
                if (arr[i].parentId == obj.id) {
                    sonTree(arr[i], arr);
                    arr[i].children = []
                    children.push(arr[i])
                }
            }
            if (children.length > 0) {
                obj.children = children
            }
            return obj;

        }

        function  treeUtils(data) {
            let ptree = [];
            for (var i = 0; i < data.length; i++) {
                if (data[i].hasChildren == "true" && data[i].label == "1") {
                    let o = sonTree(data[i], data);
                    ptree.push(o)
                }
            }
            console.info(ptree);
            return ptree;
        }
        treeUtils(arr1);
    </script>
</body>

</html>